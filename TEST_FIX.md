# 🧪 修复验证测试指南

## 快速测试步骤

### 第 1 步：刷新插件 🔄

```bash
1. 访问：chrome://extensions/
2. 找到「网页表格识别与导出器」
3. 点击刷新按钮 🔄
4. 确认版本号为 v1.1.1
```

---

### 第 2 步：打开测试页面

```bash
# 在浏览器中打开
test-element-ui.html
```

---

### 第 3 步：提取表格数据

1. **鼠标移到第一个 Element UI 表格上**
2. **点击「📊 提取表格」按钮**
3. **面板出现**

---

### 第 4 步：验证 JSON（应该正常）

点击「🟢 导出 JSON」按钮

**预期结果：**
```json
[
  {
    "ID": "1001",
    "姓名": "张三",
    "职位": "前端开发",
    "部门": "技术部"
  },
  {
    "ID": "1002",
    "姓名": "李四",
    "职位": "后端开发",
    "部门": "技术部"
  }
]
```

**检查点：**
- ✅ 4 个字段：ID, 姓名, 职位, 部门
- ✅ 没有多余的字段
- ✅ 数据完整

---

### 第 5 步：验证 CSV（修复后应该正常）

点击「🔵 导出 CSV」按钮

**预期结果：**
```csv
"ID","姓名","职位","部门"
"1001","张三","前端开发","技术部"
"1002","李四","后端开发","技术部"
"1003","王五","UI设计师","设计部"
"1004","赵六","产品经理","产品部"
```

**检查点：**
- ✅ 表头 4 列
- ✅ 数据行 4 列
- ✅ **没有第 5 列空值**
- ✅ 列数完全匹配

**修复前（错误）：**
```csv
"ID","姓名","职位","部门"
"1001","张三","前端开发","技术部",""  ← 多了第 5 列
```

---

### 第 6 步：验证 SQL（修复后应该正常）

点击「🟣 导出 SQL」按钮

**预期结果：**
```sql
-- INSERT 语句

INSERT INTO table_data (ID, 姓名, 职位, 部门) VALUES ('1001', '张三', '前端开发', '技术部');
INSERT INTO table_data (ID, 姓名, 职位, 部门) VALUES ('1002', '李四', '后端开发', '技术部');
INSERT INTO table_data (ID, 姓名, 职位, 部门) VALUES ('1003', '王五', 'UI设计师', '设计部');
INSERT INTO table_data (ID, 姓名, 职位, 部门) VALUES ('1004', '赵六', '产品经理', '产品部');
```

**检查点：**
- ✅ 列名 4 个：(ID, 姓名, 职位, 部门)
- ✅ VALUES 4 个值
- ✅ **没有第 5 个 NULL 值**
- ✅ 列数完全匹配

**修复前（错误）：**
```sql
INSERT INTO table_data (ID, 姓名, 职位, 部门) VALUES ('1001', '张三', '前端开发', '技术部', NULL);
                                                                                            ↑
                                                                                        多了 NULL
```

---

### 第 7 步：测试第二个表格

在同一页面测试「示例 2：简化的 Element UI 表格」

**预期结果：**
- ✅ JSON: 4 列（订单号, 客户名称, 金额, 状态）
- ✅ CSV: 4 列，没有多余列
- ✅ SQL: 4 个值，没有多余 NULL

---

### 第 8 步：测试标准 HTML 表格

测试「示例 3：混合表格（标准 HTML 表格）」

**预期结果：**
- ✅ JSON: 3 列（项目名称, 负责人, 进度）
- ✅ CSV: 3 列，没有多余列
- ✅ SQL: 3 个值，没有多余 NULL

---

## ✅ 验证清单

### 功能测试

- [ ] Element UI 表格 - JSON 正常
- [ ] Element UI 表格 - CSV **没有多余列**
- [ ] Element UI 表格 - SQL **没有多余 NULL**
- [ ] 标准 HTML 表格 - 所有格式正常
- [ ] Ant Design 表格 - 所有格式正常（如有测试页面）

### 边界情况

- [ ] 表格只有 1 列 - 正常
- [ ] 表格有 10+ 列 - 正常
- [ ] 表格没有表头 - 生成默认表头，列数匹配
- [ ] 空表格 - 不报错

---

## 🔍 如何判断修复成功

### 修复前的错误现象

**CSV:**
```
"列1","列2"
"值1","值2",""  ← 多了空列
```

**SQL:**
```
INSERT INTO table_data (列1, 列2) VALUES ('值1', '值2', NULL);
                                                         ↑
                                                     多了 NULL
```

### 修复后的正确输出

**CSV:**
```
"列1","列2"
"值1","值2"  ← 完全匹配
```

**SQL:**
```
INSERT INTO table_data (列1, 列2) VALUES ('值1', '值2');
                                                   ↑
                                              没有多余值
```

---

## 📊 测试数据

### 测试用例 1: Element UI 2 列表格

| id | is_deleted |
|----|------------|
| 9857 | -1 |
| 9859 | 0 |

**预期输出：**
- JSON: 2 个字段
- CSV: 2 列
- SQL: 2 个 VALUES

### 测试用例 2: Element UI 4 列表格

| ID | 姓名 | 职位 | 部门 |
|----|------|------|------|
| 1001 | 张三 | 前端开发 | 技术部 |

**预期输出：**
- JSON: 4 个字段
- CSV: 4 列
- SQL: 4 个 VALUES

---

## 🐛 如果仍有问题

### 检查清单

1. **确认插件版本**
   - 访问 `chrome://extensions/`
   - 查看版本号是否为 `1.1.1`

2. **强制刷新页面**
   - Mac: `Cmd + Shift + R`
   - Windows: `Ctrl + Shift + R`

3. **清除浏览器缓存**
   - Chrome 设置 → 隐私和安全 → 清除浏览数据
   - 选择「缓存的图片和文件」

4. **重启浏览器**
   - 完全关闭 Chrome
   - 重新打开

5. **查看控制台错误**
   - F12 打开开发者工具
   - 切换到 Console 标签
   - 查看是否有错误信息

---

## 🎉 测试成功标志

如果看到以下结果，说明修复成功：

- ✅ JSON、CSV、SQL 三种格式的列数完全一致
- ✅ 没有空列或空值
- ✅ 没有多余的 NULL
- ✅ 表头和数据行完美对齐

---

## 📝 反馈

测试完成后，请反馈：
- ✅ 修复成功 - 所有格式输出正常
- ⚠️ 部分成功 - 某些情况还有问题
- ❌ 修复失败 - 问题依然存在

如有问题，请提供：
1. 浏览器版本
2. 插件版本
3. 测试的表格类型
4. 错误截图或输出内容

---

**祝测试顺利！** 🚀
